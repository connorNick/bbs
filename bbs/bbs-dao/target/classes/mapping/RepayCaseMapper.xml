<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jzfq.pms.dao.RepayCaseMapper">
    <resultMap id="BaseResultMap" type="com.jzfq.pms.domain.RepayCase" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="case_id" property="caseId" jdbcType="INTEGER" />
    <result column="order_id" property="orderId" jdbcType="INTEGER" />
    <result column="capital" property="capital" jdbcType="INTEGER" />
    <result column="repay_state" property="repayState" jdbcType="INTEGER" />
    <result column="business_area" property="businessArea" jdbcType="INTEGER" />
    <result column="customer_name" property="customerName" jdbcType="VARCHAR" />
    <result column="customer_type" property="customerType" jdbcType="INTEGER" />
    <result column="phone_number" property="phoneNumber" jdbcType="INTEGER" />
    <result column="aging" property="aging" jdbcType="INTEGER" />
    <result column="late_days" property="lateDays" jdbcType="INTEGER" />
    <result column="today_total_amount" property="todayTotalAmount" jdbcType="DECIMAL" />
    <result column="product_line" property="productLine" jdbcType="INTEGER" />
    <result column="product_type" property="productType" jdbcType="INTEGER" />
    <result column="iou_amount" property="iouAmount" jdbcType="DECIMAL" />
    <result column="sysuser_id" property="sysuserId" jdbcType="INTEGER" />
    <result column="last_update_time" property="lastUpdateTime" jdbcType="TIMESTAMP" />
    <result column="case_status" property="caseStatus" jdbcType="INTEGER" />
    <result column="flow_status" property="flowStatus" jdbcType="INTEGER" />
    <result column="reminder" property="reminder" jdbcType="INTEGER" />
    <result column="repay_company" property="repayCompany" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
    id, case_id, order_id, capital, repay_state, business_area, customer_name, customer_type, 
    phone_number, aging, late_days, today_total_amount, product_line, product_type, iou_amount, 
    sysuser_id, last_update_time, case_status, flow_status, reminder, repay_company
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List" />
    from repay_case
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    delete from repay_case
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.jzfq.pms.domain.RepayCase" >
    insert into repay_case (id, case_id, order_id, 
      capital, repay_state, business_area, 
      customer_name, customer_type, phone_number, 
      aging, late_days, today_total_amount, 
      product_line, product_type, iou_amount, 
      sysuser_id, last_update_time, case_status, 
      flow_status, reminder, repay_company
      )
    values (#{id,jdbcType=INTEGER}, #{caseId,jdbcType=INTEGER}, #{orderId,jdbcType=INTEGER}, 
      #{capital,jdbcType=INTEGER}, #{repayState,jdbcType=INTEGER}, #{businessArea,jdbcType=INTEGER}, 
      #{customerName,jdbcType=VARCHAR}, #{customerType,jdbcType=INTEGER}, #{phoneNumber,jdbcType=INTEGER}, 
      #{aging,jdbcType=INTEGER}, #{lateDays,jdbcType=INTEGER}, #{todayTotalAmount,jdbcType=DECIMAL}, 
      #{productLine,jdbcType=INTEGER}, #{productType,jdbcType=INTEGER}, #{iouAmount,jdbcType=DECIMAL}, 
      #{sysuserId,jdbcType=INTEGER}, #{lastUpdateTime,jdbcType=TIMESTAMP}, #{caseStatus,jdbcType=INTEGER}, 
      #{flowStatus,jdbcType=INTEGER}, #{reminder,jdbcType=INTEGER}, #{repayCompany,jdbcType=INTEGER}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.jzfq.pms.domain.RepayCase" >
    insert into repay_case
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="caseId != null" >
        case_id,
      </if>
      <if test="orderId != null" >
        order_id,
      </if>
      <if test="capital != null" >
        capital,
      </if>
      <if test="repayState != null" >
        repay_state,
      </if>
      <if test="businessArea != null" >
        business_area,
      </if>
      <if test="customerName != null" >
        customer_name,
      </if>
      <if test="customerType != null" >
        customer_type,
      </if>
      <if test="phoneNumber != null" >
        phone_number,
      </if>
      <if test="aging != null" >
        aging,
      </if>
      <if test="lateDays != null" >
        late_days,
      </if>
      <if test="todayTotalAmount != null" >
        today_total_amount,
      </if>
      <if test="productLine != null" >
        product_line,
      </if>
      <if test="productType != null" >
        product_type,
      </if>
      <if test="iouAmount != null" >
        iou_amount,
      </if>
      <if test="sysuserId != null" >
        sysuser_id,
      </if>
      <if test="lastUpdateTime != null" >
        last_update_time,
      </if>
      <if test="caseStatus != null" >
        case_status,
      </if>
      <if test="flowStatus != null" >
        flow_status,
      </if>
      <if test="reminder != null" >
        reminder,
      </if>
      <if test="repayCompany != null" >
        repay_company,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="caseId != null" >
        #{caseId,jdbcType=INTEGER},
      </if>
      <if test="orderId != null" >
        #{orderId,jdbcType=INTEGER},
      </if>
      <if test="capital != null" >
        #{capital,jdbcType=INTEGER},
      </if>
      <if test="repayState != null" >
        #{repayState,jdbcType=INTEGER},
      </if>
      <if test="businessArea != null" >
        #{businessArea,jdbcType=INTEGER},
      </if>
      <if test="customerName != null" >
        #{customerName,jdbcType=VARCHAR},
      </if>
      <if test="customerType != null" >
        #{customerType,jdbcType=INTEGER},
      </if>
      <if test="phoneNumber != null" >
        #{phoneNumber,jdbcType=INTEGER},
      </if>
      <if test="aging != null" >
        #{aging,jdbcType=INTEGER},
      </if>
      <if test="lateDays != null" >
        #{lateDays,jdbcType=INTEGER},
      </if>
      <if test="todayTotalAmount != null" >
        #{todayTotalAmount,jdbcType=DECIMAL},
      </if>
      <if test="productLine != null" >
        #{productLine,jdbcType=INTEGER},
      </if>
      <if test="productType != null" >
        #{productType,jdbcType=INTEGER},
      </if>
      <if test="iouAmount != null" >
        #{iouAmount,jdbcType=DECIMAL},
      </if>
      <if test="sysuserId != null" >
        #{sysuserId,jdbcType=INTEGER},
      </if>
      <if test="lastUpdateTime != null" >
        #{lastUpdateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="caseStatus != null" >
        #{caseStatus,jdbcType=INTEGER},
      </if>
      <if test="flowStatus != null" >
        #{flowStatus,jdbcType=INTEGER},
      </if>
      <if test="reminder != null" >
        #{reminder,jdbcType=INTEGER},
      </if>
      <if test="repayCompany != null" >
        #{repayCompany,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.jzfq.pms.domain.RepayCase" >
    update repay_case
    <set >
      <if test="caseId != null" >
        case_id = #{caseId,jdbcType=INTEGER},
      </if>
      <if test="orderId != null" >
        order_id = #{orderId,jdbcType=INTEGER},
      </if>
      <if test="capital != null" >
        capital = #{capital,jdbcType=INTEGER},
      </if>
      <if test="repayState != null" >
        repay_state = #{repayState,jdbcType=INTEGER},
      </if>
      <if test="businessArea != null" >
        business_area = #{businessArea,jdbcType=INTEGER},
      </if>
      <if test="customerName != null" >
        customer_name = #{customerName,jdbcType=VARCHAR},
      </if>
      <if test="customerType != null" >
        customer_type = #{customerType,jdbcType=INTEGER},
      </if>
      <if test="phoneNumber != null" >
        phone_number = #{phoneNumber,jdbcType=INTEGER},
      </if>
      <if test="aging != null" >
        aging = #{aging,jdbcType=INTEGER},
      </if>
      <if test="lateDays != null" >
        late_days = #{lateDays,jdbcType=INTEGER},
      </if>
      <if test="todayTotalAmount != null" >
        today_total_amount = #{todayTotalAmount,jdbcType=DECIMAL},
      </if>
      <if test="productLine != null" >
        product_line = #{productLine,jdbcType=INTEGER},
      </if>
      <if test="productType != null" >
        product_type = #{productType,jdbcType=INTEGER},
      </if>
      <if test="iouAmount != null" >
        iou_amount = #{iouAmount,jdbcType=DECIMAL},
      </if>
      <if test="sysuserId != null" >
        sysuser_id = #{sysuserId,jdbcType=INTEGER},
      </if>
      <if test="lastUpdateTime != null" >
        last_update_time = #{lastUpdateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="caseStatus != null" >
        case_status = #{caseStatus,jdbcType=INTEGER},
      </if>
      <if test="flowStatus != null" >
        flow_status = #{flowStatus,jdbcType=INTEGER},
      </if>
      <if test="reminder != null" >
        reminder = #{reminder,jdbcType=INTEGER},
      </if>
      <if test="repayCompany != null" >
        repay_company = #{repayCompany,jdbcType=INTEGER},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.jzfq.pms.domain.RepayCase" >
    update repay_case
    set case_id = #{caseId,jdbcType=INTEGER},
      order_id = #{orderId,jdbcType=INTEGER},
      capital = #{capital,jdbcType=INTEGER},
      repay_state = #{repayState,jdbcType=INTEGER},
      business_area = #{businessArea,jdbcType=INTEGER},
      customer_name = #{customerName,jdbcType=VARCHAR},
      customer_type = #{customerType,jdbcType=INTEGER},
      phone_number = #{phoneNumber,jdbcType=INTEGER},
      aging = #{aging,jdbcType=INTEGER},
      late_days = #{lateDays,jdbcType=INTEGER},
      today_total_amount = #{todayTotalAmount,jdbcType=DECIMAL},
      product_line = #{productLine,jdbcType=INTEGER},
      product_type = #{productType,jdbcType=INTEGER},
      iou_amount = #{iouAmount,jdbcType=DECIMAL},
      sysuser_id = #{sysuserId,jdbcType=INTEGER},
      last_update_time = #{lastUpdateTime,jdbcType=TIMESTAMP},
      case_status = #{caseStatus,jdbcType=INTEGER},
      flow_status = #{flowStatus,jdbcType=INTEGER},
      reminder = #{reminder,jdbcType=INTEGER},
      repay_company = #{repayCompany,jdbcType=INTEGER}
    where id = #{id,jdbcType=INTEGER}
  </update>

  <select id="findCaseList" parameterType="com.jzfq.pms.common.common.PageVo" resultMap="BaseResultMap">
    SELECT <include refid="Base_Column_List" />
    FROM repay_case WHERE 1=1
    <if test="vo.parameters.caseId!=null">
      and case_id LIKE CONCAT(#{vo.parameters.caseId},'%' )
    </if>    
    <if test="vo.parameters.orderId!=null">
      and order_id =#{vo.parameters.orderId}
    </if>    
    <if test="vo.parameters.businessArea!=null">
      and business_area =#{vo.parameters.business_area},'%' )
    </if>
    <if test="vo.parameters.capital!=null">
      and capital =#{vo.parameters.capital}
    </if>    
    <if test="vo.parameters.customerName!=null">
      and customer_name LIKE CONCAT(#{vo.parameters.customerName},'%' )
    </if>
    <if test="vo.parameters.customerType!=null">
      and customer_type=#{vo.parameters.customerType}
    </if>    
    <if test="vo.parameters.phoneNumber!=null">
      and phone_number=#{vo.parameters.phoneNumber}
    </if>
    <if test="vo.parameters.aging!=null">
      and aging=#{vo.parameters.aging}
    </if>
    <if test="vo.parameters.lateDays!=null">
      and late_days=#{vo.parameters.lateDays}
    </if>
    <if test="vo.parameters.productLine!=null">
      and product_line=#{vo.parameters.productLine}
    </if>
    <if test="vo.parameters.productType!=null">
      and product_type=#{vo.parameters.productType}
    </if>   
    <if test="vo.parameters.iouAmount!=null and vo.parameters.iouAmount!=''">
      and iou_amount<![CDATA[>= ]]>#{vo.parameters.iouAmount}
    </if>
    <if test="vo.parameters.iouAmountEnd!=null and vo.parameters.iouAmountEnd!=''">
      and iou_amount<![CDATA[<= ]]>#{vo.parameters.iouAmountEnd}
    </if>  
    <if test="vo.parameters.sysuserId!=null">
      and sysuser_id=#{vo.parameters.sysuserId}
    </if>   
    <if test="vo.parameters.lastUpdateTime!=null and vo.parameters.lastUpdateTime!='' ">  
          and last_update_time<![CDATA[>= ]]>CONCAT(#{vo.parameters.lastUpdateTime},'00:00:00')
    </if>  
    <if test="vo.parameters.lastUpdateTimeEnd!=null and vo.parameters.lastUpdateTimeEnd!='' ">
         and last_update_time<![CDATA[<= ]]>CONCAT(#{vo.parameters.lastUpdateTimeEnd},'23:59:59')
    </if>      
    <if test="vo.parameters.todayTotalAmount!=null and vo.parameters.todayTotalAmount!='' ">  
          and today_total_amount<![CDATA[>= ]]>#{vo.parameters.todayTotalAmount}
    </if>  
    <if test="vo.parameters.todayTotalAmountEnd!=null and vo.parameters.todayTotalAmountEnd!='' ">
         and today_total_amount<![CDATA[<= ]]>#{vo.parameters.todayTotalAmountEnd}
    </if>  
     <if test="vo.parameters.flowStatus!=null">
      and flow_status=#{vo.parameters.flowStatus}
    </if> 
    <if test="vo.parameters.caseStatus!=null">
      and case_status=#{vo.parameters.caseStatus}
    </if>
    
    
    <if test="vo.sort.orderColumn!=null">
      order by 
        <if test="vo.sort.orderColumn=='caseId'">
          case_id
        </if>
        <if test="vo.sort.orderColumn=='customerName'">
          customer_name
        </if>
        <if test="vo.sort.orderColumn=='aging'">
          aging
        </if>
          <if test="vo.sort.orderColumn=='orderId'">
          order_id
        </if>
          <if test="vo.sort.orderColumn=='repayState'">
          repay_state
        </if>
          <if test="vo.sort.orderColumn=='businessArea'">
          business_area
        </if>
         <if test="vo.sort.orderColumn=='customerType'">
          customer_type
        </if>
          <if test="vo.sort.orderColumn=='phoneNumber'">
          phone_number
        </if>
          <if test="vo.sort.orderColumn=='lateDays'">
          late_days
        </if>        
         <if test="vo.sort.orderColumn=='todayTotalAmount'">
          today_total_amount
        </if>
         <if test="vo.sort.orderColumn=='productLine'">
          product_line
        </if>
         <if test="vo.sort.orderColumn=='productType'">
          product_type
        </if>
         <if test="vo.sort.orderColumn=='iouAmount'">
          iou_amount
        </if>
         <if test="vo.sort.orderColumn=='sysuserId'">
          sysuser_id
        </if>
         <if test="vo.sort.orderColumn=='lastUpdateTime'">
          last_update_time
        </if>
         <if test="vo.sort.orderColumn=='capital'">
          capital
        </if>  
       ${vo.sort.orderDir}
    </if>     
  </select>
  
   <update id="updateReminderByIds" parameterType="com.jzfq.pms.domain.RepayCase">
	    update repay_case
	    set reminder=#{reminder},
	    flow_status=#{flowStatus},
	    case_status=#{caseStatus}
	    where 1=1
	    <if test="uidsList !=null and  uidsList.size() > 0 ">
	     and id in
	     <foreach collection="uidsList" item="i" open="(" close=")" separator=",">
	       #{i}
	     </foreach>
       </if>
    </update>
    
     <update id="updateCompanyNameByIds" parameterType="com.jzfq.pms.domain.RepayCase">
	    update repay_case
	    set repay_company=#{companyId},
	    flow_status=#{flowStatus},
	    case_status=#{caseStatus}
	    where 1=1
	    <if test="uidsList !=null and  uidsList.size() > 0 ">
	     and id in
	     <foreach collection="uidsList" item="i" open="(" close=")" separator=",">
	       #{i}
	     </foreach>
        </if>
    </update>
    
    <update id="updateFlowStatusByIds">
        update repay_case
	    set
	    flow_status=#{flowStatus},
	    case_status=#{caseStatus}
	    where 1=1
	    <if test="ids !=null and ids.size() > 0 ">
	     and id in
	     <foreach collection="ids" item="i" open="(" close=")" separator=",">
	       #{i}
	     </foreach>
        </if>
    </update>

</mapper>